<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Sealed Nectar â€” Islamic Book Chatbot</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      color: #1f2937;
      transition: background 0.3s, color 0.3s;
    }
    body.dark {
      background-color: #111827;
      color: #f3f4f6;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 20px;
      border-bottom: 1px solid #e5e7eb;
      background: white;
    }
    body.dark header {
      background: #1f2937;
      border-color: #374151;
    }
    .container {
      display: grid;
      grid-template-columns: 25% 45% 30%;
      height: calc(100vh - 70px);
    }
    aside, section {
      padding: 16px;
      overflow-y: auto;
      background: white;
    }
    body.dark aside, body.dark section {
      background: #1f2937;
    }
    aside h2 {
      font-size: 16px;
      margin-bottom: 8px;
    }
    .chapter {
      padding: 8px;
      margin-bottom: 6px;
      border-radius: 6px;
      cursor: pointer;
    }
    .chapter:hover {
      background: #f3f4f6;
    }
    body.dark .chapter:hover {
      background: #374151;
    }
    .selected {
      background: #e0f2fe !important;
    }
    #reader {
      direction: rtl;
      font-family: 'Noto Naskh Arabic', serif;
      font-size: 20px;
      line-height: 1.8;
    }
    #reader .verse {
      background: #f9fafb;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 8px;
      position: relative;
    }
    body.dark #reader .verse {
      background: #374151;
    }
    #reader .actions {
      position: absolute;
      left: 10px;
      top: 8px;
      font-size: 12px;
    }
    #chat {
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    #messages {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 8px;
    }
    .msg {
      padding: 8px;
      border-radius: 8px;
      margin: 4px 0;
      max-width: 85%;
    }
    .bot {
      background: #f3f4f6;
    }
    .user {
      background: #2563eb;
      color: white;
      margin-left: auto;
    }
    body.dark .bot {
      background: #374151;
      color: #f3f4f6;
    }
    footer {
      font-size: 12px;
      text-align: center;
      padding: 6px;
      opacity: 0.6;
    }
    .controls {
      display: flex;
      gap: 8px;
    }
    input[type=text] {
      flex: 1;
      padding: 8px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      outline: none;
    }
    body.dark input {
      background: #111827;
      color: #f3f4f6;
      border-color: #4b5563;
    }
    button {
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #16a34a;
      color: white;
    }
    .dark-toggle {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <header>
    <div>
      <h1 style="margin:0;">Ø§Ù„Ø±Ø­ÛŒÙ‚ Ø§Ù„Ù…Ø®ØªÙˆÙ… â€” The Sealed Nectar</h1>
      <small>Interactive Islamic Book & Chatbot</small>
    </div>
    <div class="dark-toggle">
      <label>ðŸŒ™ Dark Mode</label>
      <input type="checkbox" id="darkMode" />
    </div>
  </header>

  <div class="container">
    <!-- Left Panel -->
    <aside>
      <h2>ðŸ“– Chapters</h2>
      <div id="chapterList"></div>
    </aside>

    <!-- Center Reader -->
    <section id="reader">
      <h2 id="chapterTitle">Select a Chapter</h2>
      <div id="verses"></div>
    </section>

    <!-- Right Chat -->
    <aside>
      <h2>ðŸ’¬ Chat Assistant</h2>
      <div id="chat">
        <div id="messages">
          <div class="msg bot">Welcome to the Sealed Nectar guide. Ask about any chapter or verse!</div>
        </div>
        <div class="controls">
          <input type="text" id="userInput" placeholder="Ask about a verse or chapter..." />
          <button onclick="sendMessage()">Send</button>
        </div>
      </div>
    </aside>
  </div>

  <footer>Developed by Syed M Arsalan Shah â€” Sealed Nectar Chat UI Demo</footer>

  <script>
    // --- Example data ---
    const chapters = [
      { id: 1, title: "Preface", content: [
        { arabic: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘Ù°Ù‡Ù Ø§Ù„Ø±ÙŽÙ‘Ø­Ù’Ù…Ù°Ù†Ù Ø§Ù„Ø±ÙŽÙ‘Ø­ÙÙŠÙ’Ù…Ù", translation: "In the name of Allah, the Most Merciful, the Compassionate." },
        { arabic: "Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘Ù°Ù‡Ù Ø±ÙŽØ¨ÙÙ‘ Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ", translation: "All praise is due to Allah, Lord of the worlds." }
      ] },
      { id: 2, title: "The Early Life", content: [
        { arabic: "Ù‚ÙŽØ¯Ù’ Ø¬ÙŽØ§Ø¡ÙŽÙƒÙÙ…Ù’ Ø±ÙŽØ³ÙÙˆÙ„ÙŒ Ù…ÙÙ†Ù’ Ø£ÙŽÙ†Ù’ÙÙØ³ÙÙƒÙÙ…Ù’", translation: "There has come to you a Messenger from among yourselves." }
      ] },
      { id: 3, title: "Migration", content: [
        { arabic: "Ø¥ÙÙ†ÙŽÙ‘ Ø§Ù„ÙŽÙ‘Ø°ÙÙŠÙ†ÙŽ Ø¢Ù…ÙŽÙ†ÙÙˆØ§ ÙˆÙŽÙ‡ÙŽØ§Ø¬ÙŽØ±ÙÙˆØ§", translation: "Indeed, those who believed and emigrated..." }
      ] }
    ];

    const chapterList = document.getElementById('chapterList');
    const versesDiv = document.getElementById('verses');
    const chapterTitle = document.getElementById('chapterTitle');
    const darkMode = document.getElementById('darkMode');
    const body = document.body;

    let selectedChapter = null;
    let messages = document.getElementById('messages');

    chapters.forEach(ch => {
      const div = document.createElement('div');
      div.className = 'chapter';
      div.innerText = ch.title;
      div.onclick = () => selectChapter(ch);
      chapterList.appendChild(div);
    });

    function selectChapter(ch) {
      document.querySelectorAll('.chapter').forEach(c => c.classList.remove('selected'));
      event.target.classList.add('selected');
      selectedChapter = ch;
      chapterTitle.textContent = ch.title;
      versesDiv.innerHTML = '';

      ch.content.forEach((v, i) => {
        const verseDiv = document.createElement('div');
        verseDiv.className = 'verse';
        verseDiv.innerHTML = `
          <div class='actions'>
            <button onclick=\"askVerse('${v.arabic.replace(/'/g, '')}')\">Ask</button>
          </div>
          <div>${v.arabic}</div>
          <div style='font-size:14px;opacity:0.8;margin-top:4px;'>${v.translation}</div>
        `;
        versesDiv.appendChild(verseDiv);
      });
    }

    function askVerse(verse) {
      const input = document.getElementById('userInput');
      input.value = 'Explain: ' + verse;
      input.focus();
    }

    function sendMessage() {
      const input = document.getElementById('userInput');
      const text = input.value.trim();
      if (!text) return;

      addMessage(text, 'user');
      input.value = '';

      setTimeout(() => {
        const reply = generateBotReply(text);
        addMessage(reply, 'bot');
      }, 600);
    }

    function addMessage(text, role) {
      const div = document.createElement('div');
      div.className = 'msg ' + role;
      div.textContent = text;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    function generateBotReply(input) {
      if (!selectedChapter) return 'Please select a chapter first.';
      if (/summarize/i.test(input)) return `Summary of ${selectedChapter.title}: The chapter discusses key events and lessons.`;
      if (/meaning|translate|explain/i.test(input)) return `Meaning: ${selectedChapter.content[0].translation}`;
      return 'Ask me about the chapter, its verses, or a summary.';
    }

    darkMode.addEventListener('change', () => {
      body.classList.toggle('dark');
    });
  </script>

</body>
</html>
